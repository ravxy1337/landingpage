const navLinks=document.querySelectorAll(".nav-link"),sections=document.querySelectorAll(".page-section");function showSection(e){sections.forEach(e=>{e.classList.remove("active")});let t=document.getElementById(e);t&&t.classList.add("active"),navLinks.forEach(e=>{e.classList.remove("active")});let i=document.querySelector(`[href="/${e}"]`);i&&i.classList.add("active"),history.pushState(null,"",`/${e}`)}navLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let i=e.getAttribute("href").substring(1);showSection(i)})}),window.addEventListener("popstate",()=>{let e=window.location.pathname.substring(1)||"about";showSection(e)}),document.addEventListener("DOMContentLoaded",()=>{let e=window.location.pathname.substring(1)||"about";showSection(e)});const mobileMenuBtn=document.querySelector(".mobile-menu-btn"),navLinksContainer=document.querySelector(".nav-links");mobileMenuBtn.addEventListener("click",()=>{navLinksContainer.classList.toggle("show");let e=mobileMenuBtn.querySelector("i");e.classList.toggle("fa-bars"),e.classList.toggle("fa-times")}),navLinks.forEach(e=>{e.addEventListener("click",()=>{navLinksContainer.classList.remove("show");let e=mobileMenuBtn.querySelector("i");e.classList.add("fa-bars"),e.classList.remove("fa-times")})}),window.addEventListener("scroll",()=>{let e=document.querySelector(".header");window.scrollY>50?(e.style.background="rgba(15, 15, 35, 0.95)",e.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.3)"):(e.style.background="rgba(15, 15, 35, 0.85)",e.style.boxShadow="none")}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1),i=document.getElementById(t);i&&window.scrollTo({top:i.offsetTop-80,behavior:"smooth"})})});let currentSlide=0,slides=[],testiList,totalSlides=0,isTransitioning=!1;function loadTestimonies(){if(console.log("Loading testimonies from JSON..."),!(testiList=document.getElementById("testiList"))){console.log("Error: Element #testiList not found");return}fetch("testimonies.json").then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{console.log("JSON data loaded successfully:",e),createSlidesFromData(e)}).catch(e=>{console.error("Error loading testimonies.json:",e),console.log("Using fallback data..."),createFallbackTestimonies()})}function createSlidesFromData(e){console.log("Creating slides from JSON data..."),testiList.innerHTML="",e.forEach((e,t)=>{let i=document.createElement("div");i.className="testi-item",i.innerHTML=`
      <img src="assets/${e.image}" alt="Invoice ${e.id}" class="testi-invoice" 
           onerror="this.src='/placeholder.svg?height=500&width=350&text=Invoice+${e.id}';">
      <p class="testi-detail">${e.product} - ${e.date}</p>
    `,testiList.appendChild(i)}),slides=document.querySelectorAll(".testi-item"),totalSlides=e.length,currentSlide=0,console.log("Slides created from JSON:",slides.length),initializeSlider()}function createFallbackTestimonies(){console.log("Creating fallback testimonies...");let e=[{id:1,product:"Free Fire 5 Diamond",date:"Sabtu, 24 Mei 2025"},{id:2,product:"Pulsa Rp 50.000",date:"Minggu, 25 Mei 2025"},{id:3,product:"Voucher Data 5GB",date:"Senin, 26 Mei 2025"},{id:4,product:"Mobile Legends 50 Diamond",date:"Senin, 26 Mei 2025"},];testiList.innerHTML="",e.forEach((e,t)=>{let i=document.createElement("div");i.className="testi-item",i.innerHTML=`
      <img src="/placeholder.svg?height=500&width=350&text=Invoice+${e.id}" alt="Invoice ${e.id}" class="testi-invoice">
      <p class="testi-detail">${e.product} - ${e.date}</p>
    `,testiList.appendChild(i)}),slides=document.querySelectorAll(".testi-item"),totalSlides=e.length,currentSlide=0,console.log("Fallback slides created:",slides.length),initializeSlider()}function initializeSlider(){if(!testiList||!slides.length){console.log("Cannot initialize slider - missing elements");return}console.log("Initializing slider with",totalSlides,"slides"),testiList.style.transition="none",testiList.style.transform="translateX(0%)",testiList.offsetHeight,setTimeout(()=>{testiList.style.transition="transform 0.5s ease-in-out"},50),createDots(),updateDots(),setupButtons()}function createDots(){let e=document.getElementById("sliderDots");if(e){e.innerHTML="";for(let t=0;t<totalSlides;t++){let i=document.createElement("div");i.className="dot",i.addEventListener("click",()=>{console.log("Dot clicked:",t),goToSlide(t)}),e.appendChild(i)}}}function updateDots(){let e=document.querySelectorAll(".dot");e.forEach((e,t)=>{e.classList.toggle("active",t===currentSlide)})}function setupButtons(){let e=document.querySelector(".prev-btn"),t=document.querySelector(".next-btn");e&&(e.onclick=()=>{console.log("Previous button clicked"),moveSlide(-1)}),t&&(t.onclick=()=>{console.log("Next button clicked"),moveSlide(1)})}function moveSlide(e){if(!slides.length||isTransitioning){console.log("Cannot move slide - transitioning or no slides");return}console.log("Moving slide:",e,"Current:",currentSlide),isTransitioning=!0;let t=currentSlide+e;t<0?t=totalSlides-1:t>=totalSlides&&(t=0),currentSlide=t,console.log("New slide:",currentSlide);let i=-(100*currentSlide);testiList.style.transform=`translateX(${i}%)`,updateDots(),setTimeout(()=>{isTransitioning=!1,console.log("Transition complete")},500)}function goToSlide(e){if(!slides.length||isTransitioning||e===currentSlide)return;console.log("Going to slide:",e),isTransitioning=!0,currentSlide=e;let t=-(100*currentSlide);testiList.style.transform=`translateX(${t}%)`,updateDots(),setTimeout(()=>{isTransitioning=!1},500)}function handleKeyboardNavigation(e){document.getElementById("testi")?.classList.contains("active")&&("ArrowLeft"===e.key?(e.preventDefault(),moveSlide(-1)):"ArrowRight"===e.key&&(e.preventDefault(),moveSlide(1)))}window.moveSlide=moveSlide,window.goToSlide=goToSlide;let touchStartX=0,touchEndX=0,isSwiping=!1;function handleTouchStart(e){document.getElementById("testi")?.classList.contains("active")&&(touchStartX=e.changedTouches[0].screenX,isSwiping=!0)}function handleTouchEnd(e){document.getElementById("testi")?.classList.contains("active")&&isSwiping&&(touchEndX=e.changedTouches[0].screenX,handleSwipe(),isSwiping=!1)}function handleSwipe(){let e=touchStartX-touchEndX;Math.abs(e)>50&&(e>0?moveSlide(1):moveSlide(-1))}function updateDashboardMetrics(){let e=document.querySelectorAll(".progress-fill"),t=document.querySelectorAll(".chart-bar");e.forEach(e=>{e.style.width=`${Math.floor(40*Math.random())+30}%`}),t.forEach(e=>{e.style.height=`${Math.floor(60*Math.random())+20}%`});let i=document.getElementById("lastUpdate");if(i){let s=new Date;i.textContent=s.toLocaleTimeString()}}document.addEventListener("keydown",handleKeyboardNavigation),document.addEventListener("touchstart",handleTouchStart,{passive:!0}),document.addEventListener("touchend",handleTouchEnd,{passive:!0}),document.addEventListener("DOMContentLoaded",()=>{loadTestimonies(),setInterval(updateDashboardMetrics,5e3);let e=document.querySelectorAll(".faq-question");e.forEach(e=>{e.addEventListener("click",()=>{let t=e.nextElementSibling,i=e.querySelector(".faq-icon");t.classList.toggle("active"),i.classList.toggle("active")})})});